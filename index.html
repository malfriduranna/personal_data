<html>
  <head>
    <meta charset="utf-8" />
    <title>Spotify Listening</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/info.css" />
    <link rel="stylesheet" href="css/card.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/controls.css"/>
    <link rel="stylesheet" href="css/layout.css"/>
    <link rel="stylesheet" href="css/tooltip.css"/>
    <link rel="stylesheet" href="css/top-artists.css"/>
    <link rel="stylesheet" href="css/charts.css"/>
    <link rel="stylesheet" href="css/messages.css"/>
  </head>
  <body>
    <div class="layout">
      <header class="header">
        <img src="img/Logo.png" class="header_logo" alt="Logo" />
        <nav class="header_nav">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/top_things">Top Things</a></li>
            <li><a href="compareArtists.html">Compare</a></li>
            <li><a href="dive_deeper.html">Dive Deeper</a></li>
          </ul>
        </nav>
        <button class="button"><a>Login</a></button>
      </header>

      <main class="main">
        <section class="info">
          <h1>Discover your listening trend</h1>
          <div class="info_text">
            <p>Welcome to your Spotify Trends & Habits Analyzer!</p>
            <p>
              Discover how you listen to musicâ€”track your top artists, explore
              seasonal trends, and see when you hit play the most. Compare
              different time periods, uncover shifts in your music taste, and
              dive into interactive charts for a fun and insightful look at your
              listening habits. Ready to explore your music journey?
            </p>
          </div>
        </section>

        <section class="overview">
          <h1>Overview</h1>
          <div class="top_overview" id="include-overview"></div>
        </section>

        <section id="wrapped-section">
          <h1>Spotify Listening Dashboard</h1>
          <div id="include-wrapped"></div>
        </section>

        <!-- <h1>Spotify Listening Dashboard</h1> -->

        <!-- <script>
          fetch("wrapped_page.html")
            .then((response) => response.text())
            .then((html) => {
              // Extract the content inside <main>...</main>
              const wrappedContent = new DOMParser()
                .parseFromString(html, "text/html")
                .querySelector("main");
              if (wrappedContent) {
                document.getElementById("include-wrapped").innerHTML = wrappedContent.innerHTML;
              }
            });
        </script>
         -->

        <!-- Tooltip Div -->
        <div id="tooltip"></div>
      </main>

      <footer class="footer">
        <img src="img/Logo.png" class="footer_logo" alt="Logo" />
        <nav class="footer_nav">
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/privacy">Privacy</a></li>
          </ul>
        </nav>
        <p class="footer_text">Â© 2025 YourSiteName</p>
      </footer>
    </div>

    <!-- Link to the external JavaScript file (defer ensures HTML is parsed first) -->
    <!-- <script src="scripts/spotifyDashboard.js" type="module" defer></script> -->

    <script>
      fetch("index_overview.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("include-overview").innerHTML = data;

          // ðŸ’¡ Dynamically load and execute the script
          const script = document.createElement("script");
          script.src = "scripts/get_overview.js";
          document.body.appendChild(script);
        });
    </script>
    <script>
      fetch("wrapped_page.html")
        .then((response) => response.text())
        .then((html) => {
          const wrapped = new DOMParser().parseFromString(html, "text/html");
          const wrappedMain = wrapped.querySelector("main");
          if (wrappedMain) {
            document.getElementById("include-wrapped").innerHTML = wrappedMain.innerHTML;
    
            // âœ… Dynamically load the dashboard script AFTER content is inserted
            const script = document.createElement("script");
            script.src = "scripts/spotifyDashboard.js";
            script.type = "module";
            document.body.appendChild(script);
          }
        });
    </script>

  </body>
</html>
