<html>
  <head>
    <meta charset="utf-8" />
    <title>Spotify Listening</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/info.css" />
    <link rel="stylesheet" href="css/card.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/controls.css"/>
    <link rel="stylesheet" href="css/layout.css"/>
    <link rel="stylesheet" href="css/tooltip.css"/>
    <link rel="stylesheet" href="css/top-artists.css"/>
    <link rel="stylesheet" href="css/charts.css"/>
    <link rel="stylesheet" href="css/messages.css"/>
  </head>
  <body>
    <div class="layout">
      <header class="header">
        <img src="img/Logo.png" class="header_logo" alt="Logo" />
        <nav class="header_nav">
          <ul>
            <li><a href="/">Home</a></li>
            <li><a href="/top_things">Top Things</a></li>
            <li><a href="/compare">Compare</a></li>
            <li><a href="dive_deeper.html">Dive Deeper</a></li>
          </ul>
        </nav>
        <button class="button"><a>Login</a></button>
      </header>

      <main class="main">
        <section class="info">
          <h1>Discover your listening trend</h1>
          <div class="info_text">
            <p>Welcome to your Spotify Trends & Habits Analyzer!</p>
            <p>
              Discover how you listen to musicâ€”track your top artists, explore
              seasonal trends, and see when you hit play the most. Compare
              different time periods, uncover shifts in your music taste, and
              dive into interactive charts for a fun and insightful look at your
              listening habits. Ready to explore your music journey?
            </p>
          </div>
        </section>

        <section class="overview">
          <h1>Overview</h1>
          <div class="top_overview" id="include-overview"></div>
        </section>

        <h1>Spotify Listening Dashboard</h1>

        <div class="controls">
          <div>
            <label for="yearSelect">Quick Select Year:</label
            ><select id="yearSelect"></select>
          </div>
          <div>|</div>
          <div>
            <label for="startDate">Start Date:</label
            ><input type="date" id="startDate" />
          </div>
          <div>
            <label for="endDate">End Date:</label
            ><input type="date" id="endDate" />
          </div>
          <button id="applyRangeBtn">Apply Range</button>
        </div>

        <div class="visualization-area">
          <div id="calendar-container">
            <h2>Daily Listening</h2>
            <div id="calendar"></div>
            <div id="legend"></div>
          </div>
          <div id="top-artists-container">
            <h2>Top 5 Artists</h2>
            <ul id="topArtists"></ul>
          </div>
        </div>

        <!-- Row for additional charts -->
        <div class="charts-row">
          <div class="chart_container" id="top-tracks-container">
            <h2>Top Tracks</h2>
            <div id="top-tracks-chart"></div>
          </div>
          <div class="chart_container" id="time-of-day-container">
            <h2>Listening by Time of Day</h2>
            <div id="time-of-day-chart"></div>
          </div>
          <div class="chart_container" id="day-of-week-container">
            <h2>Listening by Day of Week</h2>
            <div id="day-of-week-chart"></div>
          </div>
          <!-- <div class="chart-container" id="genre-container">
                 <h2>Genre Breakdown</h2>
                 <div id="genre-chart"></div>
            </div> -->
        </div>

        <!-- Tooltip Div -->
        <div id="tooltip"></div>
      </main>

      <footer class="footer">
        <img src="img/Logo.png" class="footer_logo" alt="Logo" />
        <nav class="footer_nav">
          <ul>
            <li><a href="/about">About</a></li>
            <li><a href="/contact">Contact</a></li>
            <li><a href="/privacy">Privacy</a></li>
          </ul>
        </nav>
        <p class="footer_text">Â© 2025 YourSiteName</p>
      </footer>
    </div>

    <!-- Link to the external JavaScript file (defer ensures HTML is parsed first) -->
    <script src="scripts/spotifyDashboard.js" type="module" defer></script>

    <script>
      fetch("index_overview.html")
        .then((response) => response.text())
        .then((data) => {
          document.getElementById("include-overview").innerHTML = data;

          // ðŸ’¡ Dynamically load and execute the script
          const script = document.createElement("script");
          script.src = "scripts/get_overview.js";
          document.body.appendChild(script);
        });
    </script>
  </body>
</html>
