<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Spotify Dashboard - Enhanced</title>
        <!-- Link your main stylesheet -->
        <link rel="stylesheet" href="style.css">
        <!-- Link specific CSS for dashboard layout if needed -->
        <link rel="stylesheet" href="css/dashboard-layout.css"> <!-- CREATE THIS FILE -->
        <!-- Other CSS links -->
        <link rel="stylesheet" href="css/controls.css"/>
        <link rel="stylesheet" href="css/charts.css"/>
        <link rel="stylesheet" href="css/messages.css"/>
        <link rel="stylesheet" href="css/tooltip.css"/>
        <link rel="stylesheet" href="css/top-lists.css"/> <!-- CREATE THIS FILE -->

        <!-- D3 Libraries -->
        <script src="https://d3js.org/d3.v7.min.js"></script>
        <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
    </head>
<body>
    <main class="dashboard-main"> <!-- Add class to main -->
        <h1>Spotify Listening Dashboard</h1>

        <!-- Section for Controls -->
        <section class="dashboard-section controls-section card"> <!-- Wrap controls -->
            <h2>View Controls</h2>
            <div class="controls main-controls">
                <!-- Controls content remains the same -->
                <div>
                    <label for="wrappedYearSelect">Quick Select Year:</label>
                    <select id="wrappedYearSelect"></select>
                </div>
                <div> | </div>
                <div><label for="startDate">Start Date:</label><input type="date" id="startDate" /></div>
                <div><label for="endDate">End Date:</label><input type="date" id="endDate" /></div>
                <button id="applyRangeBtn" class="button">Apply Range</button> <!-- Ensure button class -->
            </div>
        </section>

        <!-- Section for Calendar + Top Lists -->
        <section class="dashboard-section calendar-top-section">
            <div class="calendar-wrapper card"> <!-- Wrap calendar in a card -->
                <h2>Daily Listening Heatmap</h2>
                <div id="calendar"></div>
                <div id="legend"></div>
                <div class="filter-info">Current Selection: <span id="current-filter-info">Loading...</span></div>
            </div>
            <div class="top-lists-wrapper"> <!-- New wrapper for side-by-side lists -->
                <div class="top-list-container card" id="top-artists-container"> <!-- Card for artists -->
                    <h2>Top 5 Artists</h2>
                    <ul id="topArtists" class="styled-list"></ul> <!-- Add class to list -->
                </div>
                <div class="top-list-container card" id="top-tracks-container"> <!-- Card for tracks -->
                    <h2>Top 5 Tracks</h2>
                     <!-- Container for sparkline list -->
                    <div id="top-tracks-chart" class="styled-list top-list-sparkline"></div>
                </div>
            </div>
        </section>

        <!-- Section for Timeline -->
        <section class="dashboard-section full-width-section card"> <!-- Full width card -->
             <h2>Last 24 Hours Timeline</h2>
             <div id="timeline-chart"></div>
             <p class="chart-description">Shows individual listening events in the last 24 hours of the full dataset.</p>
        </section>

        <!-- Section for Row Charts (Time/Day) -->
        <section class="dashboard-section charts-row-section">
            <div class="chart-container card" id="time-of-day-container"> <!-- Card -->
                 <h2>Time of Day (in Main View)</h2>
                 <div id="time-of-day-chart"></div>
                 <p class="chart-description">Total listening time distribution by hour.</p>
            </div>
            <div class="chart-container card" id="day-of-week-container"> <!-- Card -->
                 <h2>Day of Week (in Main View)</h2>
                 <div id="day-of-week-chart"></div>
                 <p class="chart-description">Total listening time distribution by day.</p>
            </div>
        </section>

         <!-- Section for Row Charts (Stream/Force) -->
        <section class="dashboard-section charts-row-section">
             <div class="chart-container card"> <!-- Card -->
                <h2>Music vs Podcast Rate</h2>
                <div id="streamgraph-chart"></div>
                 <p class="chart-description">Proportional listening time (%) for selected period.</p>
            </div>
            <div class="chart-container card"> <!-- Card -->
                <h2>Artist Transitions</h2>
                <div id="force-graph-chart"></div>
                <p class="chart-description">Transitions between top 10 artists in selected period.</p>
            </div>
        </section>

        <!-- Tooltip remains outside sections -->
        <div id="tooltip"></div>

    </main>

    <script src="scripts/spotifyDashboard.js" type="module" defer></script>
</body>
</html>